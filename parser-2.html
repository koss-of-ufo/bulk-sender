<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üîç –ü–∞—Ä—Å–µ—Ä —Å –∑–∞–ø—Ä–æ—Å–æ–º –∫ –ë–î</title>
<style>
:root {
    --bg: #f3f4f6;
    --card: #fff;
    --muted: #64748b;
    --ok: #16a34a;
    --err: #ef4444;
    --info: #0ea5e9;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
    font-family: Inter, system-ui, Segoe UI, Roboto, Arial, sans-serif;
    margin: 18px;
    background: var(--bg);
    color: #0f1724;
}

.container {
    max-width: 1200px;
    margin: 12px auto;
    padding: 16px;
    border-radius: 10px;
    background: var(--card);
    box-shadow: 0 6px 20px rgba(2, 6, 23, 0.06);
}

.header {
    border-bottom: 1px solid #e2e8f0;
    padding-bottom: 10px;
    margin-bottom: 12px;
}

.header h1 { font-size: 18px; margin-bottom: 8px; }
.header p { color: #475569; font-size: 13px; }

.content { padding-top: 4px; }
.form-group { margin-bottom: 12px; }

label {
    display: block;
    font-size: 13px;
    color: #111;
    margin-bottom: 8px;
}

textarea {
    width: 100%;
    min-height: 160px;
    padding: 10px;
    border: 1px solid #e6e9ef;
    border-radius: 8px;
    font-size: 14px;
    line-height: 1.5;
    resize: vertical;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
}

textarea:focus {
    outline: none;
    border-color: #0b74ff;
    box-shadow: 0 0 0 2px rgba(11, 116, 255, 0.15);
}

.results-layout {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 12px;
    margin-top: 12px;
    align-items: start;
}

.result-column {
    display: flex;
    flex-direction: column;
    gap: 12px;
    min-width: 0;
}

.result-card {
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    padding: 14px;
    transition: box-shadow .2s ease, transform .2s ease;
    cursor: pointer;
    position: relative;
    overflow: hidden;
}

.result-card:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(2, 6, 23, 0.10); }
.result-card.main { border-left: 4px solid #16a34a; }
.result-card.sql { border-left: 4px solid #0ea5e9; }
.result-card.num-csv { border-left: 4px solid #0b74ff; }
.result-card.uuid-main { border-left: 4px solid #7c3aed; }
.result-card.uuid-sql { border-left: 4px solid #db2777; }
.result-card.uuid-csv { border-left: 4px solid #f97316; }
.result-card.grz-main { border-left: 4px solid #ef4444; }
.result-card.grz-sql { border-left: 4px solid #dc2626; }
.result-card.grz-csv { border-left: 4px solid #b91c1c; }

.result-title { font-size: 13px; font-weight: 600; margin-bottom: 8px; color: #334155; }

.result-number {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
    font-size: 15px;
    font-weight: 700;
    color: #0f172a;
    word-break: break-all;
    line-height: 1.35;
    min-height: 24px;
    display: flex;
    align-items: center;
}

.result-card.sql .result-number,
.result-card.uuid-sql .result-number,
.result-card.uuid-csv .result-number,
.result-card.num-csv .result-number,
.result-card.grz-sql .result-number,
.result-card.grz-csv .result-number {
    font-size: 13px;
    font-weight: 600;
    max-height: 140px;
    overflow-y: auto;
}

.count-badge {
    position: absolute;
    top: 10px;
    right: 10px;
    background: #16a34a;
    color: #fff;
    border-radius: 999px;
    padding: 3px 8px;
    font-size: 11px;
    font-weight: 700;
}

.result-card.uuid-main .count-badge,
.result-card.uuid-sql .count-badge { background: #7c3aed; }
.result-card.uuid-csv .count-badge { background: #f97316; }
.result-card.num-csv .count-badge { background: #0b74ff; }
.result-card.grz-main .count-badge,
.result-card.grz-sql .count-badge,
.result-card.grz-csv .count-badge { background: #ef4444; }

.query-button {
    background: #0b74ff;
    color: #fff;
    border: 0;
    padding: 8px 12px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    margin-top: 2px;
}

.query-button:hover { background: #0962d9; }

.status {
    padding: 10px;
    border-radius: 8px;
    text-align: center;
    font-weight: 600;
    margin-top: 12px;
    font-size: 13px;
}

.status.success { background: rgba(22, 163, 74, 0.08); color: var(--ok); border: 1px solid rgba(22, 163, 74, 0.12); }
.status.error { background: rgba(239, 68, 68, 0.06); color: var(--err); border: 1px solid rgba(239, 68, 68, 0.12); }

.debug {
    margin-top: 10px;
    border-radius: 8px;
    padding: 10px;
    background: #0b1220;
    color: #e6eef9;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
    font-size: 12px;
}

.instructions {
    margin-top: 12px;
    font-size: 12px;
    color: #475569;
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    padding: 10px;
}

.db-results-container {
    margin-top: 12px;
    padding: 10px;
    background: #f8fafc;
    border-radius: 8px;
    border: 1px solid #e2e8f0;
}

.db-results-container h3 { margin-bottom: 10px; color: #0f172a; font-size: 14px; }
.db-results-table { width: 100%; border-collapse: collapse; font-size: 13px; }
.db-results-table th, .db-results-table td { border: 1px solid #e2e8f0; padding: 6px; text-align: left; }
.db-results-table th { background-color: #f1f5f9; font-weight: 700; }
.db-results-table tr:nth-child(even) { background-color: #f8fafc; }

@media (max-width: 1024px) {
    .results-layout { grid-template-columns: 1fr; }
}
</style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>üîç –ü–∞—Ä—Å–µ—Ä –¥–∞–Ω–Ω—ã—Ö</h1>
        <p>–ü–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è | UUID | –ì–†–ù–ó</p>
    </div>

    <div class="content">
        <div class="form-group">
            <label>üìù –í—Å—Ç–∞–≤—å —Ç–µ–∫—Å—Ç –æ–±—Ä–∞—â–µ–Ω–∏—è:</label>
            <textarea id="inputText" placeholder="–ü—Ä–∏–º–µ—Ä: ..."></textarea>
        </div>

        <div id="result" style="display: none;">
            <div class="results-layout">
                <!-- 1. –ö–û–õ–û–ù–ö–ê: –ü–û–°–¢–ê–ù–û–í–õ–ï–ù–ò–Ø -->
                <div class="result-column">
                    <h3 style="color:#28a745;">üìú –ü–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è</h3>
                    <div class="result-card main" id="cardNumMain" onclick="copyNumber()">
                        <div class="count-badge" id="mainCount">0</div>
                        <div class="result-title">üì± –ù–æ–º–µ—Ä –ø–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è</div>
                        <div class="result-number" id="outputText"></div>
                    </div>
                    <div class="result-card sql" id="cardNumSql" onclick="copySQL()">
                        <div class="count-badge" id="sqlCount">0</div>
                        <div class="result-title">üíæ SQL IN (...)</div>
                        <div class="result-number" id="sqlOutput"></div>
                    </div>
                    <div class="result-card num-csv" id="cardNumCsv" onclick="copyNumCsv()">
                        <div class="count-badge" id="numCsvCount">0</div>
                        <div class="result-title">üìÑ CSV (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)</div>
                        <div class="result-number" id="numCsvOutput"></div>
                    </div>
                    <button id="queryDbBtn" class="query-button" style="display:none;">üì° –ù–∞–π—Ç–∏ –ø–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –ë–î</button>
                </div>

                <!-- 2. –ö–û–õ–û–ù–ö–ê: UUID -->
                <div class="result-column">
                    <h3 style="color:#6f42c1;">üÜî UUID</h3>
                    <div class="result-card uuid-main" id="cardUuidMain" onclick="copyUUIDMain()">
                        <div class="count-badge" id="uuidMainCount">0</div>
                        <div class="result-title">üÜî UUID (–ì–ª–∞–≤–Ω—ã–π)</div>
                        <div class="result-number" id="uuidOutput"></div>
                    </div>
                    <div class="result-card uuid-sql" id="cardUuidSql" onclick="copyUUIDSQL()">
                        <div class="count-badge" id="uuidSqlCount">0</div>
                        <div class="result-title">üíæ SQL IN (UUID)</div>
                        <div class="result-number" id="uuidSqlOutput"></div>
                    </div>
                    <div class="result-card uuid-csv" id="cardUuidCsv" onclick="copyUUIDCsv()">
                        <div class="count-badge" id="uuidCsvCount">0</div>
                        <div class="result-title">üìÑ CSV –¥–ª—è –°–í–ü3</div>
                        <div class="result-number" id="uuidCsvOutput"></div>
                    </div>
                </div>

                <!-- 3. –ö–û–õ–û–ù–ö–ê: –ì–†–ù–ó -->
                <div class="result-column">
                    <h3 style="color:#dc3545;">üöó –ì–†–ù–ó (Latin)</h3>
                    <div class="result-card grz-main" id="cardGrzMain" onclick="copyGrzMain()">
                        <div class="count-badge" id="grzMainCount">0</div>
                        <div class="result-title">üöó –ì–†–ù–ó (–ì–ª–∞–≤–Ω—ã–π)</div>
                        <div class="result-number" id="grzOutput"></div>
                    </div>
                    <div class="result-card grz-sql" id="cardGrzSql" onclick="copyGrzSQL()">
                        <div class="count-badge" id="grzSqlCount">0</div>
                        <div class="result-title">üíæ SQL IN (–ì–†–ù–ó)</div>
                        <div class="result-number" id="grzSqlOutput"></div>
                    </div>
                    <div class="result-card grz-csv" id="cardGrzCsv" onclick="copyGrzCsv()">
                        <div class="count-badge" id="grzCsvCount">0</div>
                        <div class="result-title">üìÑ CSV (–ì–†–ù–ó)</div>
                        <div class="result-number" id="grzCsvOutput"></div>
                    </div>
                </div>
            </div>

            <div id="status" class="status"></div>
            <div id="debug" class="debug"></div>

            <div id="dbResultsContainer" class="db-results-container" style="display: none;">
                <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑ –ë–∞–∑—ã –î–∞–Ω–Ω—ã—Ö</h3>
                <div id="dbResultsOutput"></div>
            </div>
        </div>
        <div class="instructions"> ... </div>
    </div>
</div>

<script>
    const input = document.getElementById('inputText');
    const result = document.getElementById('result');

    // Elements for Numbers
    const output = document.getElementById('outputText');
    const sqlOutput = document.getElementById('sqlOutput');
    const numCsvOutput = document.getElementById('numCsvOutput');
    const cardNumMain = document.getElementById('cardNumMain');
    const cardNumSql = document.getElementById('cardNumSql');
    const cardNumCsv = document.getElementById('cardNumCsv');
    const mainCount = document.getElementById('mainCount');
    const sqlCount = document.getElementById('sqlCount');
    const numCsvCount = document.getElementById('numCsvCount');

    // Elements for UUIDs
    const uuidOutput = document.getElementById('uuidOutput');
    const uuidSqlOutput = document.getElementById('uuidSqlOutput');
    const uuidCsvOutput = document.getElementById('uuidCsvOutput');
    const cardUuidMain = document.getElementById('cardUuidMain');
    const cardUuidSql = document.getElementById('cardUuidSql');
    const cardUuidCsv = document.getElementById('cardUuidCsv');
    const uuidMainCount = document.getElementById('uuidMainCount');
    const uuidSqlCount = document.getElementById('uuidSqlCount');
    const uuidCsvCount = document.getElementById('uuidCsvCount');

    // Elements for GRZ (–ì–†–ù–ó)
    const grzOutput = document.getElementById('grzOutput');
    const grzSqlOutput = document.getElementById('grzSqlOutput');
    const grzCsvOutput = document.getElementById('grzCsvOutput');
    const cardGrzMain = document.getElementById('cardGrzMain');
    const cardGrzSql = document.getElementById('cardGrzSql');
    const cardGrzCsv = document.getElementById('cardGrzCsv');
    const grzMainCount = document.getElementById('grzMainCount');
    const grzSqlCount = document.getElementById('grzSqlCount');
    const grzCsvCount = document.getElementById('grzCsvCount');

    // DB Elements
    const queryDbBtn = document.getElementById('queryDbBtn');
    const dbResultsContainer = document.getElementById('dbResultsContainer');
    const dbResultsOutput = document.getElementById('dbResultsOutput');

    const status = document.getElementById('status');
    const debug = document.getElementById('debug');

    let currentNumbers = [];
    let currentUUIDs = [];
    let currentGRZ = [];

    const cyrillicToLatinMap = { '–ê': 'A', '–í': 'B', '–ï': 'E', '–ö': 'K', '–ú': 'M', '–ù': 'H', '–û': 'O', '–†': 'P', '–°': 'C', '–¢': 'T', '–£': 'Y', '–•': 'X', '–∞': 'A', '–≤': 'B', '–µ': 'E', '–∫': 'K', '–º': 'M', '–Ω': 'H', '–æ': 'O', '—Ä': 'P', '—Å': 'C', '—Ç': 'T', '—É': 'Y', '—Ö': 'X' };

    function convertCyrillicToLatin(text) {
        let result = '';
        for (let char of text) { result += cyrillicToLatinMap[char] || char; }
        return result.toUpperCase();
    }

    function extractNumbers(text) {
        const patterns = [/(\b\d{5}\s+\d{5}\s+\d{5}\s+\d{5}\s+\d{5,}\b)/gi, /(\b\d{20,}\b)/g];
        let allMatches = [];
        patterns.forEach(p => { allMatches.push(...(text.match(p) || [])); });
        return [...new Set(allMatches)].map(n => n.replace(/\s+/g, '')).filter(n => n.length >= 20 && /^\d+$/.test(n));
    }

    function extractUUIDs(text) {
        const matches = text.match(/\b[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}\b/gi) || [];
        return [...new Set(matches.map(u => u.toLowerCase()))];
    }

    function extractGRZ(text) {
        const grzPatterns = [/[–ê–í–ï–ö–ú–ù–û–†–°–¢–£–•ABEKMHOPCTYX]\s*\d{3}\s*[–ê–í–ï–ö–ú–ù–û–†–°–¢–£–•ABEKMHOPCTYX]{2}\s*\d{2,3}/gi];
        let foundGRZ = [];
        grzPatterns.forEach(p => { foundGRZ.push(...(text.match(p) || [])); });
        return [...new Set(foundGRZ.map(g => convertCyrillicToLatin(g).replace(/\s+/g, '')))];
    }

    function updateResult() {
        const text = input.value.trim();
        currentNumbers = extractNumbers(text);
        currentUUIDs = extractUUIDs(text);
        currentGRZ = extractGRZ(text);

        const hasNumbers = currentNumbers.length > 0;
        const hasUUIDs = currentUUIDs.length > 0;
        const hasGRZ = currentGRZ.length > 0;

        if (hasNumbers || hasUUIDs || hasGRZ) {
            result.style.display = 'block';
            status.className = 'status success';
            let parts = [];

            // Numbers
            cardNumMain.style.display = hasNumbers ? 'block' : 'none';
            cardNumSql.style.display = hasNumbers ? 'block' : 'none';
            cardNumCsv.style.display = hasNumbers ? 'block' : 'none';
            if(hasNumbers) {
                output.textContent = currentNumbers[0];
                sqlOutput.textContent = `in ('${currentNumbers.join("','")}')`;
                numCsvOutput.textContent = currentNumbers.join(', ');
                mainCount.textContent = `1/${currentNumbers.length}`;
                sqlCount.textContent = `${currentNumbers.length}`;
                numCsvCount.textContent = `${currentNumbers.length}`;
                parts.push(`${currentNumbers.length} –ø–æ—Å—Ç–∞–Ω–æ–≤–ª.`);
            }

            // UUIDs
            cardUuidMain.style.display = hasUUIDs ? 'block' : 'none';
            cardUuidSql.style.display = hasUUIDs ? 'block' : 'none';
            cardUuidCsv.style.display = hasUUIDs ? 'block' : 'none';
            if(hasUUIDs) {
                uuidOutput.textContent = currentUUIDs[0];
                uuidSqlOutput.textContent = `in ('${currentUUIDs.join("','")}')`;
                uuidCsvOutput.textContent = currentUUIDs.join(', ');
                uuidMainCount.textContent = `1/${currentUUIDs.length}`;
                uuidSqlCount.textContent = `${currentUUIDs.length}`;
                uuidCsvCount.textContent = `${currentUUIDs.length}`;
                parts.push(`${currentUUIDs.length} UUID`);
            }

            // GRZ
            cardGrzMain.style.display = hasGRZ ? 'block' : 'none';
            cardGrzSql.style.display = hasGRZ ? 'block' : 'none';
            cardGrzCsv.style.display = hasGRZ ? 'block' : 'none';
            if(hasGRZ) {
                grzOutput.textContent = currentGRZ[0];
                grzSqlOutput.textContent = `in ('${currentGRZ.join("','")}')`;
                grzCsvOutput.textContent = currentGRZ.join(', ');
                grzMainCount.textContent = `1/${currentGRZ.length}`;
                grzSqlCount.textContent = `${currentGRZ.length}`;
                grzCsvCount.textContent = `${currentGRZ.length}`;
                parts.push(`${currentGRZ.length} –ì–†–ù–ó`);
            }

            status.textContent = `‚úÖ –ù–∞–π–¥–µ–Ω–æ: ${parts.join(', ')}`;
            debug.innerHTML = `–¢–µ–∫—Å—Ç: ${text.length} | –ü–æ—Å—Ç: ${currentNumbers.length} | UUID: ${currentUUIDs.length} | –ì–†–ù–ó: ${currentGRZ.length}`;

        } else {
            result.style.display = 'block';
            status.textContent = '‚ùå –î–∞–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã';
            status.className = 'status error';
            document.querySelectorAll('.result-card').forEach(c => c.style.display = 'none');
            debug.textContent = '';
        }

        queryDbBtn.style.display = hasNumbers ? 'block' : 'none';
        dbResultsContainer.style.display = 'none';
    }

    async function queryDatabase() {
        if (currentNumbers.length === 0) return;
        dbResultsContainer.style.display = 'block';
        dbResultsOutput.innerHTML = '<p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>';
        const backendUrl = 'http://192.168.11.90:3003/query-violations';
        try {
            const response = await fetch(backendUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ numbers: currentNumbers }),
            });
            if (!response.ok) throw new Error(`–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${response.statusText}`);
            const data = await response.json();
            displayDbResults(data);
        } catch (error) {
            dbResultsOutput.innerHTML = `<p style="color: red;">–û—à–∏–±–∫–∞: ${error.message}. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ back-end —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω.</p>`;
        }
    }

    function displayDbResults(data) {
        if (data.length === 0) {
            dbResultsOutput.innerHTML = '<p>–ü–æ —É–∫–∞–∑–∞–Ω–Ω—ã–º –Ω–æ–º–µ—Ä–∞–º –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.</p>';
            return;
        }
        let table = '<table class="db-results-table"><thead><tr>';
        const headers = Object.keys(data[0]);
        headers.forEach(h => { table += `<th>${h}</th>`; });
        table += '</tr></thead><tbody>';
        data.forEach(row => {
            table += '<tr>';
            headers.forEach(h => { table += `<td>${row[h] !== null ? row[h] : 'NULL'}</td>`; });
            table += '</tr>';
        });
        table += '</tbody></table>';
        dbResultsOutput.innerHTML = table;
    }

function copyToClipboard(text) {
    if (navigator.clipboard && window.isSecureContext) {
        return navigator.clipboard.writeText(text);
    } else {
        const textArea = document.createElement('textarea');
        textArea.value = text;
        document.body.appendChild(textArea);
        textArea.focus(); textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        return Promise.resolve();
    }
}

function showCopied(element) {
    const original = element.innerHTML;
    const originalBg = element.style.background;
    element.innerHTML = '<div style="display:flex;align-items:center;justify-content:center;height:100%">‚úÖ –°–ö–û–ü–ò–†–û–í–ê–ù–û!</div>';
    element.style.background = '#d4edda';
    setTimeout(() => {
        element.innerHTML = original;
        element.style.background = originalBg;
    }, 1200);
}

// --- Copy: Numbers ---
window.copyNumber = function() {
    if(currentNumbers.length) copyToClipboard(currentNumbers[0]).then(() => showCopied(output));
};
window.copySQL = function() {
    if(currentNumbers.length) {
        const text = "in (" + currentNumbers.map(num => `'${num}'`).join(',') + ")";
        copyToClipboard(text).then(() => showCopied(sqlOutput));
    }
};
window.copyNumCsv = function() {
    if(currentNumbers.length) copyToClipboard(currentNumbers.join(', ')).then(() => showCopied(numCsvOutput));
};

// --- Copy: UUID ---
window.copyUUIDMain = function() {
    if(currentUUIDs.length) copyToClipboard(currentUUIDs[0]).then(() => showCopied(uuidOutput));
};
window.copyUUIDSQL = function() {
    if(currentUUIDs.length) {
        const text = "in (" + currentUUIDs.map(uid => `'${uid}'`).join(',') + ")";
        copyToClipboard(text).then(() => showCopied(uuidSqlOutput));
    }
};
window.copyUUIDCsv = function() {
    if(currentUUIDs.length) copyToClipboard(currentUUIDs.join(', ')).then(() => showCopied(uuidCsvOutput));
};

// --- Copy: GRZ ---
window.copyGrzMain = function() {
    if(currentGRZ.length) copyToClipboard(currentGRZ[0]).then(() => showCopied(grzOutput));
};
window.copyGrzSQL = function() {
    if(currentGRZ.length) {
        const text = "in (" + currentGRZ.map(g => `'${g}'`).join(',') + ")";
        copyToClipboard(text).then(() => showCopied(grzSqlOutput));
    }
};
window.copyGrzCsv = function() {
    if(currentGRZ.length) copyToClipboard(currentGRZ.join(', ')).then(() => showCopied(grzCsvOutput));
};

input.addEventListener('input', updateResult);
input.addEventListener('paste', updateResult);
input.addEventListener('keypress', e => {
    if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        // –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ Enter: –ü–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è -> UUID -> –ì–†–ù–ó
        if (currentNumbers.length > 0) copyNumber();
        else if (currentUUIDs.length > 0) copyUUIDMain();
        else if (currentGRZ.length > 0) copyGrzMain();
    }
});

    input.addEventListener('input', updateResult);
    queryDbBtn.addEventListener('click', queryDatabase);
    updateResult();
</script>
</body>
</html>